---
import { Image } from "astro:assets"
import { formatDate } from "../utils"

const {
  link,
  src,
  alt,
  title,
  date,
  featured = false,
  quality = 100,
  loading = "eager"
} = Astro.props
---

<style>
  .card {
    @apply relative
    p-2
    bg-neutral-100
    rounded
    shadow hover:shadow-lg
    transition-all
    ease-in-out
    duration-300;
  }

  .card.featured::before {
    content: "new";
    @apply absolute
     bottom-0 right-0
     text-sm text-right font-semibold
     w-[3rem]
     pr-[0.45rem]
     rounded-tl-full
     bg-orange-500 text-orange-50
     duration-100;
  }

  .card img {
    @apply h-[80%]
    p-1
    object-cover
    aspect-[4/3];
  }

  .card article {
    @apply h-[20%]
    flex flex-col
    items-center justify-center
    text-center;
  }

  .title {
    @apply text-neutral-700
    font-semibold;
  }

  .card:hover .title {
    @apply text-orange-500;
  }

  .date {
    @apply block
      text-sm;
  }
</style>

<section class={`card ${featured ? "featured" : ""}`}>
  <a href={link}>
    {
      typeof src === "string" ? (
        <img class="cover w-full aspect-square" src={src} alt={alt} />
      ) : (
        <Image
          class="cover w-full aspect-square"
          src={src}
          alt={alt}
          quality={quality}
          loading={loading}
        />
      )
    }
    <article>
      {title && <p class="title">{title}</p>}
      {date && <p class="date">{formatDate(date)}</p>}
    </article>
  </a>
</section>
